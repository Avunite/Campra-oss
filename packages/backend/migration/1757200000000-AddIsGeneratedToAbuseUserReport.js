export class AddIsGeneratedToAbuseUserReport1757200000000 {
    name = 'AddIsGeneratedToAbuseUserReport1757200000000'

    async up(queryRunner) {
        console.log('Adding isGenerated column to abuse_user_report table...');

        // Add isGenerated column to abuse_user_report table
        await queryRunner.query(`
            ALTER TABLE "abuse_user_report" ADD COLUMN IF NOT EXISTS "isGenerated" boolean NOT NULL DEFAULT false
        `);
        
        await queryRunner.query(`
            COMMENT ON COLUMN "abuse_user_report"."isGenerated" IS 'Whether this report was automatically generated by the content moderation system.'
        `);

        // Update existing reports from automod account to be marked as generated
        await queryRunner.query(`
            UPDATE "abuse_user_report" 
            SET "isGenerated" = true 
            WHERE "comment" LIKE 'ü§ñ Automatic Content Moderation Report%'
        `);

        console.log('‚úÖ Added isGenerated column to abuse_user_report table');
    }

    async down(queryRunner) {
        console.log('Removing isGenerated column from abuse_user_report table...');

        await queryRunner.query(`
            ALTER TABLE "abuse_user_report" DROP COLUMN IF EXISTS "isGenerated"
        `);

        console.log('‚è™ Removed isGenerated column from abuse_user_report table');
    }
}
